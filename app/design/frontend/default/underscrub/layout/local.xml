<?xml version="1.0"?>
<layout>

<default>
  <reference name="head">
      <action method="addJs"><script>jquery/jquery.js</script></action>
  </reference>

  <!-- Removals -->
  <remove name="catalog.compare.sidebar" />
  <remove name="right.permanent.callout" />
  <remove name="left.permanent.callout" />
  <remove name="left.newsletter" /> 
  <remove name="right.reports.product.viewed" />
  <remove name="paypal.partner.right.logo" />
  <remove name="right.poll" />
  <remove name="catalog.compare.list" />
  <remove name="product.info.additional" />

  <!-- # Template References # -->
  <reference name="header">
    <action method="setTemplate">
      <template>page/html/header.phtml</template>
    </action>

    <!-- Search Bar -->
    <reference name="catalog.topnav">
      <block type="core/template" name="top.search" as="topSearch" template="catalogsearch/form.mini.phtml" />
    </reference>
  </reference>

  <reference name="footer">
      <!-- Remove From CMS & Override -->
      <action method="unsetChild">
        <name>footer_links</name>
      </action>
      <block type="newsletter/subscribe" name="newsletter" as="newsletter" before="footer_links" template="newsletter/subscribe.phtml" />
      <action method="setTemplate">
          <template>page/html/footer.phtml</template>
      </action>
  </reference>
</default>

<!-- ### LOGIN ### -->
<!-- If Logged In -->
<customer_logged_in>
    <reference name="top.links">
      <block type="checkout/links" name="checkout_cart_link_custom">
        <action method="addCartLink"></action>
        <action method="addCheckoutLink"></action>
      </block>
    </reference>
</customer_logged_in>

<!-- If Logged Out -->
<customer_logged_out>
  <reference name="top.links">
    <action method="removeLinkByUrl"><url helper="customer/getAccountUrl" /></action>
  </reference>
</customer_logged_out>

<!-- # CATALOG # -->

<!-- Category View -->
<catalog_category_default>
    <reference name="root">
        <action method="setTemplate">
            <template>page/2columns-left.phtml</template>
        </action>
    </reference> 

    <reference name="product_list">
        <action method="setColumnCount"><columns>4</columns></action>
    </reference>
</catalog_category_default>

<!-- set column count for all catalog views -->
<catalog_category_view>
    <reference name="root">
        <action method="setTemplate">
            <template>page/2columns-left.phtml</template>
        </action>
    </reference> 

    <reference name="product_list">
        <action method="setColumnCount"><columns>4</columns></action>
    </reference>
</catalog_category_view>

<catalog_category_layered>
    <reference name="root">
        <action method="setTemplate">
            <template>page/2columns-left.phtml</template>
        </action>
    </reference> 
    <reference name="product_list">
        <action method="setColumnCount"><columns>4</columns></action>
    </reference>
</catalog_category_layered>


<!-- Individual Product View -->
<catalog_product_view>
  <reference name="root">
    <action method="setTemplate">
        <template>page/2columns-left.phtml</template>
    </action>
  </reference>
</catalog_product_view>

<!-- # SEARCH # -->

<!-- Search Result View -->
<catalogsearch_result_index>
    <reference name="root">
        <action method="setTemplate">
            <template>page/2columns-left.phtml</template>
        </action>
    </reference>

    <reference name="content">
        <action method="setColumnCount"><columns>4</columns></action>
    </reference>
</catalogsearch_result_index>
</layout>
